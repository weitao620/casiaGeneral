(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35772181","chunk-176b6dca"],{"1c4c":function(t,e,a){"use strict";var i=a("9b43"),r=a("5ca1"),s=a("4bf8"),o=a("1fa8"),n=a("33a4"),c=a("9def"),l=a("f1ae"),u=a("27ee");r(r.S+r.F*!a("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,r,h,d=s(t),p="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,v=void 0!==f,g=0,b=u(d);if(v&&(f=i(f,m>2?arguments[2]:void 0,2)),void 0==b||p==Array&&n(b))for(e=c(d.length),a=new p(e);e>g;g++)l(a,g,v?f(d[g],g):d[g]);else for(h=b.call(d),a=new p;!(r=h.next()).done;g++)l(a,g,v?o(h,f,[r.value,g],!0):r.value);return a.length=g,a}})},2654:function(t,e,a){"use strict";a("544a")},"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"32e5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEI1MEFBOEZDRDU3MTFFQThGREVDNjRGNkE4ODZCMDMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEI1MEFBOTBDRDU3MTFFQThGREVDNjRGNkE4ODZCMDMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0QjUwQUE4RENENTcxMUVBOEZERUM2NEY2QTg4NkIwMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0QjUwQUE4RUNENTcxMUVBOEZERUM2NEY2QTg4NkIwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pshh+qkAAAEGSURBVHjaXNHPKgVxFMDxmWlWLPxfYEW8wb1lI2JJ3c1lwQNYKJZWVjyASPICJDcldrKYtVdQV9koU6zYKL5H3ylm6lO/Oef85nfm/NLvvW7i04MtrGHYWIkzHOIjApmJKTxgFC2MqWUscpNRmKMX19jFVfL/ieO30cYNmrlt3Fk8gXe8uWEA/ehgNmozez6wYAYFRlQYS6xZjxMG8WTw3C8Wvh8Zq9obihPSWt9xfJ86tdzvT5f23rWNe+ybj/UiXp1SmXIPOyzG/flNfOHUDRuO/sT2nnMXMecVHNc6qDauYgGN3Btcxi3mnMajhdPewzyW8Jn9mUDDaV3iRRfmmtUkfwQYAGXkO6OzygjYAAAAAElFTkSuQmCC"},"4f7f":function(t,e,a){"use strict";var i=a("c26b"),r=a("b39a"),s="Set";t.exports=a("e0b8")(s,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return i.def(r(this,s),t=0===t?0:t,t)}},i)},"544a":function(t,e,a){},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),r=a("d8e8"),s=a("4bf8"),o=a("79e5"),n=[].sort,c=[1,2,3];i(i.P+i.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!a("2f21")(n)),"Array",{sort:function(t){return void 0===t?n.call(s(this)):n.call(s(this),r(t))}})},"5dbc":function(t,e,a){var i=a("d3f4"),r=a("8b97").set;t.exports=function(t,e,a){var s,o=e.constructor;return o!==a&&"function"==typeof o&&(s=o.prototype)!==a.prototype&&i(s)&&r&&r(t,s),t}},"5df3":function(t,e,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=i(e,a),this._i+=t.length,{value:t,done:!1})}))},"67ab":function(t,e,a){var i=a("ca5a")("meta"),r=a("d3f4"),s=a("69a8"),o=a("86cc").f,n=0,c=Object.isExtensible||function(){return!0},l=!a("79e5")((function(){return c(Object.preventExtensions({}))})),u=function(t){o(t,i,{value:{i:"O"+ ++n,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,i)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[i].i},d=function(t,e){if(!s(t,i)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[i].w},p=function(t){return l&&m.NEED&&c(t)&&!s(t,i)&&u(t),t},m=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:d,onFreeze:p}},"79e0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"power_wrap"},[i("div",{staticClass:"com_title"},[i("div",{staticClass:"c_titles"},[t._m(0),i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[t._v("基础设置")]),i("el-breadcrumb-item",{attrs:{to:{path:"/library/role"}}},[t._v("角色管理")]),i("el-breadcrumb-item",[t._v("权限设置")])],1)],1)]),i("div",{staticClass:"search_form_box"},[i("div",{staticClass:"search_title center_o_title"},[t._v("\n      设置权限\n    ")]),i("div",{staticClass:"search_heado"},[i("div",{staticClass:"search_heado_left"},[i("span",[t._v(t._s(t.powerDetail.roleName))]),i("span",[t._v(t._s(""!=t.powerDetail.roleAuthNotice?t.powerDetail.roleAuthNotice:"暂无相关描述"))])]),i("div",{staticClass:"el_btn_box"},[i("div",{staticClass:"el_one"},[i("el-button",{staticClass:"el_btn_one",attrs:{type:"primary"},on:{click:function(e){return t.addRole()}}},[i("i",{staticClass:"iconfont icon-bianji"}),t._v("\n            编辑角色\n          ")])],1),"superAdministrator"!=this.powerDetail.roleID?i("div",{staticClass:"el_two"},[i("el-button",{staticClass:"el_btn_two",attrs:{type:"primary"},on:{click:t.statusChange}},[i("i",{staticClass:"iconfont icon-tingyong"}),t._v("\n            "+t._s(1==this.powerDetail.status?"停用":"启用")+"角色\n          ")])],1):i("div",{staticClass:"el_two",staticStyle:{background:"#999"}},[i("el-button",{staticClass:"el_btn_two",staticStyle:{color:"#999"},attrs:{type:"primary"}},[i("i",{staticClass:"iconfont icon-tingyong"}),t._v("\n            停用角色\n          ")])],1),"superAdministrator"!=this.powerDetail.roleID?i("div",{staticClass:"el_two"},[i("el-button",{staticClass:"el_btn_two",attrs:{type:"primary"},on:{click:t.roleDelete}},[i("i",{staticClass:"iconfont icon-shanchu1"}),t._v("\n            删除角色\n          ")])],1):i("div",{staticClass:"el_two",staticStyle:{background:"#999"}},[i("el-button",{staticClass:"el_btn_two",staticStyle:{color:"#999"},attrs:{type:"primary"}},[i("i",{staticClass:"iconfont icon-shanchu1"}),t._v("\n            删除角色\n          ")])],1)])]),i("div",{staticClass:"power_tabs"},[i("div",{staticClass:"p_tab_box",style:{width:140*t.tabList.length/100+"rem"}},t._l(t.tabList,(function(e){return i("div",{key:e.type,class:["p_tab_btn",t.powerActive==e.type?"p_tab_act":""],on:{click:function(a){return t.powerTab(e.type)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),0)]),1==t.powerActive?i("div",{staticClass:"power_main"},[i("div",{staticClass:"p_main_list"},[i("div",{staticClass:"p_check_all"},[i("el-checkbox",{on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("选择全部")])],1),i("el-checkbox-group",{on:{change:t.powerChange},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.menuAuth,(function(e,a){return i("ul",{key:e.Pid,class:["pm_list_body",{style2:!(0==a||a==t.menuAuth.length-1)}]},[i("li",{staticClass:"list_one_li"},[i("div",{staticClass:"llo_one"},[i("el-checkbox",{staticClass:"list_one",attrs:{pid:e.Pid,label:e.Pid},model:{value:e.Mark,callback:function(a){t.$set(e,"Mark",a)},expression:"item.Mark"}},[t._v(t._s(e.Name))])],1),i("div",{staticClass:"list_one_box"},t._l(e.list,(function(e){return i("div",{key:e.Pid,staticClass:"list_two_box",attrs:{label:e.Pid}},[0!=e.Pid?i("div",{staticClass:"list_two_flex"},[i("el-checkbox",{staticClass:"list_two",attrs:{pid:e.Pid,label:e.Pid}},[t._v("\n                      "+t._s(e.Name)+"\n                    ")]),i("div",{staticClass:"list_two_flex5"})],1):t._e(),i("div",{staticClass:"list_two_li"},t._l(e.list,(function(a,r){return i("div",{key:a.Pid,staticClass:"list_thr_box",style:{"border-bottom":e.list.length>6&&r<6?"0.01rem dashed #00c2ff":0},attrs:{label:a.Pid}},[i("el-checkbox",{staticClass:"list_thr",attrs:{pid:a.Pid,label:a.Pid}},[t._v(t._s(a.Name))])],1)})),0)])})),0)])])})),0),i("div",{staticClass:"pm_btns"},["superAdministrator"!=this.powerDetail.roleID?i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]):i("el-button",{staticStyle:{background:"#aaa"},attrs:{type:"primary"},on:{click:t.onSubmit1}},[t._v("保存")]),i("el-button",{staticClass:"resets",attrs:{type:"primary"},on:{click:t.goBack}},[t._v("取消")])],1)],1)]):t._e(),2==t.powerActive?i("div",{staticClass:"power_main"},[i("div",{staticClass:"power_mtxt"},[t._v("（设置该角色管理员可以操作的部门范围）")]),i("el-form",[i("el-form-item",{staticClass:"chose_stats",attrs:{required:"",label:"已选择部门:"}},[i("ul",{staticClass:"chose_s_ul"},t._l(t.studyList,(function(e,a){return i("li",{key:a},[t._v("\n              "+t._s(e.Name)),i("span",{on:{click:function(i){return t.studyDel(e,a)}}},[t._v("X")])])})),0)])],1),i("div",{staticClass:"power_tree"},[t.reloadTree?i("el-tree",{ref:"tree",attrs:{data:t.treeData,"default-expand-all":"","default-checked-keys":t.checksList,"node-key":"Pid","highlight-current":"",props:t.defaultProps,"render-content":t.renderContent},on:{check:t.handleCheckChange}}):t._e()],1),i("div",{staticClass:"p_class_list"},[i("div",{staticClass:"pm_btns"},["superAdministrator"!=this.powerDetail.roleID?i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]):i("el-button",{staticStyle:{background:"#aaa"},attrs:{type:"primary"},on:{click:t.onSubmit1}},[t._v("保存")]),i("el-button",{staticClass:"resets",attrs:{type:"primary"},on:{click:t.goBack}},[t._v("取消")])],1)])],1):t._e(),3==t.powerActive?i("div",{staticClass:"power_main"},[i("div",{staticClass:"tables_box"},[i("div",{staticClass:"el_btn_box"},[i("div",{staticClass:"el_one"},[i("el-button",{staticClass:"el_btn_one",attrs:{type:"primary"},on:{click:t.addMember}},[i("i",{staticClass:"iconfont icon-jiahao"}),t._v("\n              添加成员\n            ")])],1),i("div",{staticClass:"el_two"},[i("el-button",{staticClass:"el_btn_two",attrs:{type:"primary"},on:{click:t.someMemberDelete}},[i("i",{staticClass:"iconfont icon-shanchu1"}),t._v("\n              批量删除\n            ")])],1)]),[i("el-table",{ref:"accountTables",staticStyle:{width:"100%"},attrs:{border:"",data:t.memberData},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection"}}),i("el-table-column",{attrs:{type:"index",label:"序号",index:t.indexMethod}}),i("el-table-column",{attrs:{prop:"name",label:"姓名"}}),i("el-table-column",{attrs:{prop:"passport",label:"登录账号"}}),i("el-table-column",{attrs:{prop:"addRoleTime",label:"添加时间"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["administrator"!=e.row.passport?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.memberDelete(e.row)}}},[t._v("删除")]):t._e(),"administrator"==e.row.passport?i("el-button",{staticStyle:{color:"#ccc !important"},attrs:{type:"text",size:"small"}},[t._v("删除")]):t._e()]}}],null,!1,1056707731)})],1)]],2)]):t._e()]),i("el-dialog",{staticClass:"fix_pass add_role",attrs:{"close-on-click-modal":!1,title:"编辑角色",visible:t.dialogAddRole},on:{"update:visible":function(e){t.dialogAddRole=e}}},[i("el-form",{ref:"roleForm",attrs:{model:t.roleForm}},[i("el-form-item",{attrs:{required:"",label:"角色名称:"}},[i("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.roleForm.name,callback:function(e){t.$set(t.roleForm,"name",e)},expression:"roleForm.name"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.addNameOne,expression:"addNameOne"}],staticClass:"tip_left"},[i("div",{staticClass:"tip_msg",staticStyle:{width:"2rem"}},[i("img",{attrs:{src:a("32e5"),alt:""}}),t._v("\n            请输入角色名称\n          ")])])],1),i("el-form-item",{attrs:{required:"",label:"角色描述:"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",maxlength:"200","show-word-limit":""},model:{value:t.roleForm.roleAuthNotice,callback:function(e){t.$set(t.roleForm,"roleAuthNotice",e)},expression:"roleForm.roleAuthNotice"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.addMarkOne,expression:"addMarkOne"}],staticClass:"tip_left"},[i("div",{staticClass:"tip_msg",staticStyle:{width:"2rem"}},[i("img",{attrs:{src:a("32e5"),alt:""}}),t._v("\n            请输入内容\n          ")])])],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"superAdministrator"!=t.roleForm.roleID,expression:"roleForm.roleID != 'superAdministrator'"}]},[i("div",{staticClass:"copy_role"},[i("el-checkbox",{model:{value:t.roleForm.copy,callback:function(e){t.$set(t.roleForm,"copy",e)},expression:"roleForm.copy"}}),i("span",[t._v("复制")]),i("section",[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.roleForm.inheritRoleID,callback:function(e){t.$set(t.roleForm,"inheritRoleID",e)},expression:"roleForm.inheritRoleID"}},t._l(t.listData,(function(t){return i("el-option",{key:t.roleID,attrs:{label:t.roleName,value:t.roleID}})})),1)],1),i("span",[t._v("的角色权限")])],1)])],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogAddRole=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addRoleSub}},[t._v("确 定")])],1)],1),i("el-dialog",{staticClass:"fix_pass look_group",attrs:{"close-on-click-modal":!1,title:"添加成员",visible:t.dialogGroupAdd},on:{"update:visible":function(e){t.dialogGroupAdd=e}}},[i("div",{staticClass:"group_box"},[i("div",{staticClass:"member_box"},[i("div",{staticClass:"mem_main"},[i("div",{staticClass:"mm_top"},[i("i",{staticClass:"iconfont icon-wode"}),t._v("\n            选择成员\n          ")]),i("div",{staticClass:"mem_ul"},[i("el-input",{staticClass:"mem_input",attrs:{placeholder:"输入成员姓名","suffix-icon":"el-icon-search"},on:{input:t.getTeacher},model:{value:t.memberName,callback:function(e){t.memberName=e},expression:"memberName"}}),i("el-checkbox-group",{on:{change:t.teacherChange},model:{value:t.teacherIds,callback:function(e){t.teacherIds=e},expression:"teacherIds"}},[i("ul",t._l(t.teacherData,(function(e){return i("li",{key:e.passport},[i("el-checkbox",{attrs:{label:e.passport}},[t._v(t._s(e.name))])],1)})),0)])],1)]),i("div",{staticClass:"mem_center"},[i("div",[i("div",{staticClass:"mem_c_bg",on:{click:t.putRight}},[i("div",{staticClass:"mem_cb"},[t._v("\n                加入右侧\n                "),i("i",{staticClass:"el-icon-right"})])]),i("div",{staticClass:"mem_c_bg",on:{click:t.putLeft}},[i("div",{staticClass:"mem_cb"},[i("i",{staticClass:"el-icon-back"}),t._v("\n                加入左侧\n              ")])])])]),i("div",{staticClass:"mem_main"},[i("div",{staticClass:"mm_top mm_tops"},[i("div",[t._v("\n              已选"),i("span",[t._v(t._s(t.teacherNew.length))]),t._v("条\n            ")]),i("div",{on:{click:t.putClear}},[t._v("清空")])]),i("div",{staticClass:"mem_ul"},[i("ul",t._l(t.teacherNew,(function(e,a){return i("li",{key:e.passport,class:{mmli_check:e.check},on:{click:function(i){return t.checkback(a,e)}}},[i("div",[t._v(t._s(e.name))])])})),0)])])])]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogGroupAdd=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确 定")])],1)])],1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com_cir"},[i("img",{attrs:{src:a("becf"),alt:""}})])}],s=(a("4f7f"),a("5df3"),a("1c4c"),a("c5f6"),a("ac6a"),a("55dd"),a("7f7f"),a("e86e")),o=[],n=[],c={name:"",data:function(){return{radios:"1",classType:1e4,powerActive:1,tabList:[{type:1,name:"操作权限"},{type:2,name:"部门权限"},{type:3,name:"成员列表"}],checkList:[],classList:[],powerDetail:{},menuAuth:[],schoolAuth:[],isIndeterminate:!0,checkAll:!1,treeData:[],defaultProps:{children:"list",label:"Name"},expandsList:[],checksList:[],studyList:[],reloadTree:!0,memberData:[],checkList3:[],limit:10,total:0,pageNum:1,currentPage:1,formSearch:{name:"",cardNumber:"",account:"",accountState:""},listData:[],addNameOne:!1,addMarkOne:!1,dialogAddRole:!1,roleForm:{roleID:"",name:"",roleAuthNotice:"",status:"",roleAuthID:"",inheritRoleID:"",remark:"",copy:!1,role:""},dialogGroupAdd:!1,memberName:"",teacherIds:[],teacherData:[],teacherNew:[],checkmList:[],cancelFlag:!1,cancelName:""}},created:function(){},mounted:function(){this.powerDetail=JSON.parse(localStorage.getItem("powerDetail")),this.getList()},methods:{roleDelete:function(){var t=this,e=JSON.parse(localStorage.getItem("powerDetail"));this.$confirm('<div class="confirm_box"><p>确定要删除当前角色？</p><p class="con_p2">删除后不可恢复</p></div>',"提示",{dangerouslyUseHTMLString:!0,cancelButtonText:"取消",confirmButtonText:"确定"}).then((function(){var a={roleID:e.roleID};t.$http.delete(s["a"]+"/aimw/role/deleteRoles",{data:a}).then((function(e){var a=e.data;0==a.code?(t.$message({type:"success",message:"删除成功!"}),t.$router.push({path:"/library/role"})):t.$message({type:"error",message:"删除失败!"})}))})).catch((function(){}))},someMemberDelete:function(){var t=this;if(0==this.checkmList.length)return this.$message({type:"warning",message:"没有选择要删除的成员!"}),!1;var e=[],a="";for(var i in this.checkmList)"administrator"!=this.checkmList[i].passport&&e.push({passport:this.checkmList[i].passport}),"administrator"==this.checkmList[i].passport&&(a="<span style='color:#FE5FB8'>(其中"+this.checkmList[i].name+"不会被删除)</span>");this.$confirm('<div class="confirm_box"><p>确定要删除所选成员？'+a+'</p><p class="con_p2">删除后不可恢复</p></div>',"提示",{dangerouslyUseHTMLString:!0,cancelButtonText:"取消",confirmButtonText:"确定"}).then((function(){t.$http.delete(s["a"]+"/aimw/role/deleteMember",{data:{roleID:t.powerDetail.roleID,passports:e}}).then((function(e){var a=e.data;0==a.code?(t.$message({type:"success",message:"删除成功!"}),t.getList1()):t.$message({type:"error",message:"删除失败!"})}))})).catch((function(){}))},memberDelete:function(t){var e=this;this.$confirm('<div class="confirm_box"><p>确定要删除当前成员？</p><p class="con_p2">删除后不可恢复</p></div>',"提示",{dangerouslyUseHTMLString:!0,cancelButtonText:"取消",confirmButtonText:"确定"}).then((function(){var a={roleID:e.powerDetail.roleID,passports:[{passport:t.passport}]};e.$http.delete(s["a"]+"/aimw/role/deleteMember",{data:a}).then((function(t){var a=t.data;0==a.code?(e.$message({type:"success",message:"删除成功!"}),e.getList1()):e.$message({type:"error",message:"删除失败!"})}))})).catch((function(){}))},checkback:function(t,e){this.teacherNew[t].check=!this.teacherNew[t].check},addGroup:function(){var t=this,e=this,a=[];for(var i in e.teacherNew)a.push({passport:e.teacherNew[i].passport});var r={roleID:this.powerDetail.roleID,passports:a};e.$http.post(s["a"]+"/aimw/role/addMembers",r).then((function(a){var i=a.data;0==i.code?(e.dialogGroupAdd=!1,t.memberName="",e.getList1(),t.$message.success("添加成功！")):t.$message.error(i.msg)})).catch((function(t){console.log(t)}))},putClear:function(){var t=this.teacherNew,e=this.teacherData;this.teacherData=e.concat(t).sort((function(t,e){return t.index-e.index})),this.teacherNew=[]},putLeft:function(){var t=this.teacherData,e=[],a=[];for(var i in this.teacherNew)e.push(this.teacherNew[i]),a.push(this.teacherNew[i]);for(var r in a)a[r].check&&(t.push(e[r]),e.splice(r,1,""));for(var s=0;s<e.length;s++)""==e[s]&&(e.splice(s,1),s-=1);for(var o in this.teacherData=t.sort((function(t,e){return t.index-e.index})),this.teacherNew=e,this.teacherNew)this.teacherIds.push(this.teacherNew[o].passport)},putRight:function(){var t=this,e=[];for(var a in this.teacherData)e.push(this.teacherData[a]);for(var i in e)for(var r in t.teacherIds)t.teacherIds[r]==e[i].passport&&(e[i].check=!1,t.teacherNew.push(e[i]),e.splice(i,1,""));for(var s=0;s<e.length;s++)""==e[s]&&(e.splice(s,1),s-=1);t.teacherData=e,t.teacherNew=t.teacherNew.sort((function(t,e){return t.index-e.index}))},teacherChange:function(t){this.teacherIds=t},addMember:function(){this.teacherIds=this.teacherData=this.teacherNew=[],this.getTeacher()},getTeacher:function(){var t=this,e={limit:1e4,name:t.memberName};this.$http.get(s["a"]+"/aimw/manager/listManagersInfo",{params:e}).then((function(e){var a=e.data.data.results;for(var i in t.teacherNew)for(var r in a)a[r]&&a[r].passport==t.teacherNew[i].passport&&(a.splice(r,1),r-=1);for(var s in t.dialogGroupAdd=!0,a)a[s].check=!1,a[s].index=s;for(var o in t.memberData)for(var n in a)a[n]&&a[n].passport==t.memberData[o].passport&&(a.splice(n,1),n-=1);t.teacherData=a}))},getInit:function(){var t=this;t.$http.get(s["a"]+"/aimw/role/listRolesInfo").then((function(e){var a=e.data.data;0==e.data.code?t.listData=a?a.results:[]:t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(e.data.msg)}))},addRole:function(){var t=JSON.parse(localStorage.getItem("powerDetail")),e=this;this.getInit(),t.status?e.roleForm.status=1:e.roleForm.status=0,""!=t.inheritRoleID?(e.roleForm.copy=!0,e.cancelFlag=!0):(e.roleForm.copy=!1,e.cancelFlag=!1),e.cancelName=t.inheritRoleID,e.roleForm.roleID=t.roleID,e.roleForm.name=t.roleName,e.roleForm.roleAuthNotice=t.roleAuthNotice,e.roleForm.inheritRoleID=t.inheritRoleID,this.dialogAddRole=!0},addRoleSub:function(){var t=this,e=this;if(this.addNameOne=this.addMarkOne=!1,""==this.roleForm.name)return this.addNameOne=!0,!1;if(""==this.roleForm.roleAuth)return this.addMarkOne=!0,!1;var a={},i=0;if(this.cancelFlag?(console.log(22),i=this.roleForm.copy?this.roleForm.inheritRoleID==this.cancelName?0:1:2):(console.log(2),i=this.roleForm.copy?1:0),this.roleForm.copy){if(""==this.roleForm.inheritRoleID)return this.$message.warning("请选选择要复制角色权限"),!1;a={roleName:this.roleForm.name,roleAuthNotice:this.roleForm.roleAuthNotice,inheritRoleID:this.roleForm.inheritRoleID}}else a={roleName:this.roleForm.name,roleAuthNotice:this.roleForm.roleAuthNotice,inheritRoleID:""};a.status=e.roleForm.status,a.roleID=e.roleForm.roleID,a.cancel=i,console.log(a),e.$http.put(s["a"]+"/aimw/role/updateRoleInfo",a).then((function(e){var i=e.data;0==i.code?(t.dialogAddRole=!1,t.powerDetail.inheritRoleID=a.inheritRoleID,t.powerDetail.roleAuthNotice=a.roleAuthNotice,t.powerDetail.roleID=a.roleID,t.powerDetail.roleName=a.roleName,t.powerDetail.status=a.status,localStorage.setItem("powerDetail",JSON.stringify(t.powerDetail)),t.getList(),t.$message.success("更新成功！")):t.$message.error(i.msg)})).catch((function(t){console.log(t)}))},statusChange:function(){var t=this,e=JSON.parse(localStorage.getItem("powerDetail")),a=this,i={},r="/aimw/role/updateRoleInfo";i={roleID:e.roleID,roleName:e.roleName,roleAuthNotice:e.roleAuthNotice,inheritRoleID:e.inheritRoleID,cancel:0},1==e.status?i.status=0:i.status=1,a.$http.put(s["a"]+r,i).then((function(e){var a=e.data;0==a.code?(t.dialogAddRole=!1,t.powerDetail.status=i.status,localStorage.setItem("powerDetail",JSON.stringify(t.powerDetail)),t.getList(),t.$message.success(1==i.status?"已启用！":"已停用！")):t.$message.error(a.msg)})).catch((function(t){console.log(t)}))},indexMethod:function(t){var e=this;return t+1+e.limit*(this.currentPage-1)},sortChange:function(t){},handleSelectionChange:function(t){this.checkmList=t},studyDel:function(t,e){var a=this;this.studyList.splice(e,1),this.reloadTree=!1,setTimeout((function(){a.reloadTree=!0}),0)},handleCheckChange:function(t,e,a){this.checksList=e.checkedKeys},renderContent:function(t,e){var a=this,i=e.node,r=e.data,s=(e.store,{Name:r.Name,Pid:r.Pid}),o=this;return r.list?t("span",{class:"custom-tree-node"},[t("el-checkbox",{attrs:{checked:-1!=JSON.stringify(o.studyList).indexOf(JSON.stringify(s))},on:{change:function(){return a.append(s,r,i)}}}),t("span",{style:"margin-left:0.06rem"},[i.label])]):t("span",{class:"custom-tree-node"},[t("span",[t("el-checkbox",{attrs:{checked:-1!=JSON.stringify(o.studyList).indexOf(JSON.stringify(s))},on:{change:function(){return a.append(s,r,i)}}})]),t("span",{style:"margin-left:0.06rem"},[i.label])])},append:function(t,e,a){var i=this,r={Name:t.Name,Pid:t.Pid};if(-1!=JSON.stringify(i.studyList).indexOf(JSON.stringify(r)))for(var s in i.studyList)i.studyList[s].Pid==r.Pid&&i.studyList.splice(s,1);else i.studyList.push(r)},addChange:function(){var t=this,e=this;this.addChangeFlag=!0;var a={passport:localStorage.getItem("passport")};this.$http.get(s["a"]+"/aimw/organization/listOrgTreeInfo",{params:a}).then((function(a){var i=a.data;if(0==i.code){if(i){t.addChangeFlag=!0;var r=JSON.parse(i.data).organization;e.checksList=[],e.expandsList=[],t.treeData=r}}else e.$message.error(i.msg)})).catch((function(t){console.log(t)}))},getStr2:function(t){var e=this;t.forEach((function(t){t.list&&(t.list1=t.list,e.getStr2(t.list)),1==t.Mark&&(e.studyList.push({Name:t.Name,Pid:t.Pid}),e.checksList.push(t.Pid))}))},recursiveFunction2:function(t){var e=this;e.getStr2(t)},getList:function(){var t=this,e=this;e.$http.get(s["a"]+"/aimw/role/listAuthInfo",{params:{roleID:this.powerDetail.roleID}}).then((function(a){var i=a.data;if(0==i.code){localStorage.setItem("powerDetailNew",i.data);var r=JSON.parse(i.data);for(var s in t.menuAuth=[],n=[],t.checkList=[],t.menuAuth=r.menuAuth.function,e.menuAuth)if(1==e.menuAuth[s].Mark){e.checkList.push(e.menuAuth[s].Pid);var c=e.menuAuth[s].list;for(var l in c)if(1==c[l].Mark){e.checkList.push(c[l].Pid);var u=c[l].list;for(var h in u)1==u[h].Mark&&e.checkList.push(u[h].Pid)}}for(var d in e.menuAuth){n.push(e.menuAuth[d].Pid);var p=e.menuAuth[d].list;for(var m in p){n.push(p[m].Pid);var f=p[m].list;for(var v in f)n.push(f[v].Pid)}}o=e.checkList,o.length==n.length?t.checkAll=!0:t.checkAll=!1,t.organizationAuth=[],t.organizationAuth=r.organizationAuth.organization,e.studyList=[],e.classList=[],t.recursiveFunction2(t.organizationAuth),t.treeData=e.organizationAuth,t.reloadTree=!1,setTimeout((function(){t.reloadTree=!0}),100)}})).catch((function(t){console.log(t)}))},powerTab:function(t){this.powerActive=t,3==t&&this.getList1(1)},getList1:function(t){var e=this,a={roleID:this.powerDetail.roleID};this.$http.get(s["a"]+"/aimw/role/listMembers",{params:a}).then((function(t){var a=t.data.data;0==t.data.code?e.memberData=a||[]:e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(t.data.msg)}))},handleCheckAllChange:function(t){this.checkList=t?n:[],o=t?n:[],this.isIndeterminate=!1},powerChange:function(t){var e=this,a=this,i=[],r=JSON.parse(localStorage.getItem("powerDetailNew")).menuAuth.function,s=o;if(s.length>t.length)setTimeout((function(){o=i;var t=a.checkList;for(var s in t)for(var c in r){r[c].Pid===t[s]&&(r[c].Marks=1);var l=r[c].list;for(var u in l){l[u].Pid===t[s]&&(l[u].Marks=1);var h=l[u].list;for(var d in h)h[d].Pid===t[s]&&(h[d].Marks=1)}}var p=[];for(var m in r){if(1==r[m].Marks){p.push(r[m].Pid);var f=r[m].list;for(var v in f){if(1==f[v].Marks){p.push(f[v].Pid);var g=f[v].list;for(var b in g)1==g[b].Marks&&p.push(g[b].Pid)}if(!f[v].Marks){var _=f[v].list;for(var k in _)a.$delete(_[k],"Marks")}}}if(!r[m].Marks){var A=r[m].list;for(var w in A)if(A[w].Marks&&a.$delete(A[w],"Marks"),!A[w].Marks){var y=A[w].list;for(var D in y)y[D].Marks&&a.$delete(y[D],"Marks")}}}o=p,a.checkList=p,o.length==n.length?e.checkAll=!0:e.checkAll=!1}),100);else{for(var c in t)t[c]%1e4!=0&&(i.push(Number(String(t[c]).substr(0,1)+"0000")),t[c]%100!=0&&i.push(Number(String(t[c]).substr(0,3)+"00"))),i.push(t[c]);a.checkList=Array.from(new Set(i)).sort((function(t,e){return t-e})),i=Array.from(new Set(i)).sort((function(t,e){return t-e})),setTimeout((function(){o=i;var t=a.checkList;for(var s in t)for(var c in r){r[c].Pid===t[s]&&(r[c].Marks=1);var l=r[c].list;for(var u in l){l[u].Pid===t[s]&&(l[u].Marks=1);var h=l[u].list;for(var d in h)h[d].Pid===t[s]&&(h[d].Marks=1)}}o.length-1==n.length?e.checkAll=!0:e.checkAll=!1}),100)}},onSubmit1:function(){this.$message.warning(this.powerDetail.roleName+"不允许进行修改！")},onSubmit:function(){var t=this,e=this;for(var a in e.checkList)30100==e.checkList[a]&&e.checkList.splice(a,1);var i=[];for(var r in e.studyList)i.push(e.studyList[r].Pid);var o={menuAuthID:e.checkList,organizationAuthID:i},n={roleID:e.powerDetail.roleID,roleAuthID:JSON.stringify(o)},c=n;e.$http.put(s["a"]+"/aimw/role/updateAuthInfo",c).then((function(e){var a=e.data;0==a.code?(t.getList(),t.$message({type:"success",message:"更新成功!"})):t.$message.error(a.msg)})).catch((function(t){console.log(t)}))},goBack:function(){this.$router.push({path:"/library/role"})}}},l=c,u=(a("2654"),a("2877")),h=Object(u["a"])(l,i,r,!1,null,null,null);e["default"]=h.exports},"8b97":function(t,e,a){var i=a("d3f4"),r=a("cb7c"),s=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,a){return s(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:s}},aa77:function(t,e,a){var i=a("5ca1"),r=a("be13"),s=a("79e5"),o=a("fdef"),n="["+o+"]",c="​",l=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),h=function(t,e,a){var r={},n=s((function(){return!!o[t]()||c[t]()!=c})),l=r[t]=n?e(d):o[t];a&&(r[a]=l),i(i.P+i.F*n,"String",r)},d=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=h},b39a:function(t,e,a){var i=a("d3f4");t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},becf:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODhDRDM4ODVDRDU1MTFFQThGREVDNjRGNkE4ODZCMDMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODhDRDM4ODZDRDU1MTFFQThGREVDNjRGNkE4ODZCMDMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OENEMzg4M0NENTUxMUVBOEZERUM2NEY2QTg4NkIwMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OENEMzg4NENENTUxMUVBOEZERUM2NEY2QTg4NkIwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pio4LfMAAAB6SURBVHjaYmQo/f+fgUTAAoQM/9sYGInVwFjF8J8JpIlEaxiYGNhI1MQG0sROoiZ2sm3iIFETB8hbQOsYyxiID3YtELHsPwgwEItB6hkZ1mJE7hcg5sHDZ8A0aQuqzeh8EGbCFjp4+aBU8R/qOsb9hAPjvyMkuQEEGABKVl6SZq3CDAAAAABJRU5ErkJggg=="},c26b:function(t,e,a){"use strict";var i=a("86cc").f,r=a("2aeb"),s=a("dcbc"),o=a("9b43"),n=a("f605"),c=a("4a59"),l=a("01f9"),u=a("d53b"),h=a("7a56"),d=a("9e1e"),p=a("67ab").fastKey,m=a("b39a"),f=d?"_s":"size",v=function(t,e){var a,i=p(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,l){var u=t((function(t,i){n(t,u,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=i&&c(i,a,t[l],t)}));return s(u.prototype,{clear:function(){for(var t=m(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var a=m(this,e),i=v(a,t);if(i){var r=i.n,s=i.p;delete a._i[i.i],i.r=!0,s&&(s.n=r),r&&(r.p=s),a._f==i&&(a._f=r),a._l==i&&(a._l=s),a[f]--}return!!i},forEach:function(t){m(this,e);var a,i=o(t,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){i(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(t){return!!v(m(this,e),t)}}),d&&i(u.prototype,"size",{get:function(){return m(this,e)[f]}}),u},def:function(t,e,a){var i,r,s=v(t,e);return s?s.v=a:(t._l=s={i:r=p(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=s),i&&(i.n=s),t[f]++,"F"!==r&&(t._i[r]=s)),t},getEntry:v,setStrong:function(t,e,a){l(t,e,(function(t,a){this._t=m(t,e),this._k=a,this._l=void 0}),(function(){var t=this,e=t._k,a=t._l;while(a&&a.r)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?u(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,u(1))}),a?"entries":"values",!a,!0),h(e)}}},c5f6:function(t,e,a){"use strict";var i=a("7726"),r=a("69a8"),s=a("2d95"),o=a("5dbc"),n=a("6a99"),c=a("79e5"),l=a("9093").f,u=a("11e9").f,h=a("86cc").f,d=a("aa77").trim,p="Number",m=i[p],f=m,v=m.prototype,g=s(a("2aeb")(v))==p,b="trim"in String.prototype,_=function(t){var e=n(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():d(e,3);var a,i,r,s=e.charCodeAt(0);if(43===s||45===s){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var o,c=e.slice(2),l=0,u=c.length;l<u;l++)if(o=c.charCodeAt(l),o<48||o>r)return NaN;return parseInt(c,i)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(g?c((function(){v.valueOf.call(a)})):s(a)!=p)?o(new f(_(e)),a,m):_(e)};for(var k,A=a("9e1e")?l(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;A.length>w;w++)r(f,k=A[w])&&!r(m,k)&&h(m,k,u(f,k));m.prototype=v,v.constructor=m,a("2aba")(i,p,m)}},e0b8:function(t,e,a){"use strict";var i=a("7726"),r=a("5ca1"),s=a("2aba"),o=a("dcbc"),n=a("67ab"),c=a("4a59"),l=a("f605"),u=a("d3f4"),h=a("79e5"),d=a("5cc5"),p=a("7f20"),m=a("5dbc");t.exports=function(t,e,a,f,v,g){var b=i[t],_=b,k=v?"set":"add",A=_&&_.prototype,w={},y=function(t){var e=A[t];s(A,t,"delete"==t||"has"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,a){return e.call(this,0===t?0:t,a),this})};if("function"==typeof _&&(g||A.forEach&&!h((function(){(new _).entries().next()})))){var D=new _,N=D[k](g?{}:-0,1)!=D,I=h((function(){D.has(1)})),C=d((function(t){new _(t)})),M=!g&&h((function(){var t=new _,e=5;while(e--)t[k](e,e);return!t.has(-0)}));C||(_=e((function(e,a){l(e,_,t);var i=m(new b,e,_);return void 0!=a&&c(a,v,i[k],i),i})),_.prototype=A,A.constructor=_),(I||M)&&(y("delete"),y("has"),v&&y("get")),(M||N)&&y(k),g&&A.clear&&delete A.clear}else _=f.getConstructor(e,t,v,k),o(_.prototype,a),n.NEED=!0;return p(_,t),w[t]=_,r(r.G+r.W+r.F*(_!=b),w),g||f.setStrong(_,t,v),_}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);